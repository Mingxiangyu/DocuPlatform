**文档目的**: 本文档旨在清晰定义“知识付费平台”V1.6版本的功能需求、业务逻辑、边界条件及验收标准，作为产品、设计、开发、测试等团队的工作基准，确保各方对产品有统一、准确的理解。

## 1. 修订历史
| 版本号 | 修订日期 | 修订人 | 修订内容 |
| --- | --- | --- | --- |
| V1.0 | (初始日期) | (您的名字) | 创建项目核心定位与基础功能规格 |
| V1.1 | 2025-09-06 | 云舒 (AI) | 新增用户账户与个人中心，细化付费流程、工具数据逻辑及边界条件 |
| V1.2 | 2025-09-06 | 云舒 (AI) | 增加移动端兼容性，明确后端内容安全，新增首页直接购买流程 |
| V1.3 | 2025-09-06 | 云舒 (AI) | **核心修正**：明确后台文章创建流程为“上传Markdown -> 编辑预览 -> 发布” |
| V1.4 | 2025-09-06 | 云舒 (AI) | 新增角色与权限管理模块，明确初始管理员创建方式 |
| V1.5 | 2025-09-06 | 云舒 (AI) | **功能增强**：新增文章划线与笔记功能、内容合集打包售卖功能 |
| V1.6 | 2025-09-06 | 云舒 (AI) | **体验完善**：新增全站搜索、文章分享与点赞功能，形成最终交付版 |


## 2. 项目背景与目标
### 2.1 核心问题
当前创业者群体在获取系统化、高品质的知识服务时面临挑战。他们需要一个平台，不仅能提供深度、专业的文章内容，还能提供可以直接落地执行的实用工具，并将两者无缝结合，形成“学习-思考-实践”的闭环，从而高效解决实际工作中的问题。

### 2.2 需求目标
V1.6版本旨在构建一个功能全面、体验闭环、具备初步社区互动和营销能力的知识服务平台。

1. **构建核心价值闭环**: 实现从内容发现、搜索、付费（单篇/合集）、深度阅读（划线/笔记），到使用关联工具并获得产出的完整用户旅程。
2. **建立可运营的用户体系**: 搭建包含角色权限、个人资产管理（购买、笔记、点赞）的账户系统。
3. **奠定增长基础**: 通过社交分享、点赞反馈等功能，为产品上线后的口碑传播和内容迭代提供基础。

## 3. 用户画像与场景
### 3.1 目标用户
+ **普通用户**: 创业者、初创企业团队成员、寻求高效解决方案的专业人士。
+ **内容运营**: 平台的内容创作者与管理者。
+ **系统管理员**: 平台的最高权限管理者。

## 4. 功能需求详述
### 4.1 模块一：用户账户与个人中心
#### 4.1.1 用户故事: 游客无缝注册/登录并支付
+ **作为** 一名未登录用户
+ **我希望** 在点击付费购买文章时，能够在一个连贯的流程中完成登录/注册和支付
+ **以便于** 减少操作步骤，避免因流程中断而放弃购买
+ **业务规则与逻辑**:
    1. 用户在文章付费墙或列表页卡片点击“购买”按钮。
    2. 系统记录用户的购买意图（目标文章或合集）。
    3. 弹出一个模态窗口，提供“微信扫码登录”和“邮箱+密码登录/注册”的选项。
    4. 用户选择并成功完成登录或注册操作。
    5. 登录窗口自动关闭，系统基于之前记录的购买意图，立即弹出该文章的支付二维码模态窗口。
    6. 用户扫码支付。支付成功后，支付窗口关闭，文章全文解锁。
+ **验收标准**:
    1. 未登录用户点击购买按钮后，必须先弹出登录/注册窗口。
    2. 用户成功登录/注册后，无需再次点击购买按钮，应自动衔接并弹出支付二维码。
    3. 支持微信扫码登录和邮箱+密码的注册/登录方式。

#### 4.1.2 用户故事: 访问个人中心
+ **作为** 一名已登录用户
+ **我希望** 网站顶部有清晰的入口可以进入“个人中心”
+ **以便于** 管理我的购买记录、工具和账户信息
+ **验收标准**:
    1. 用户登录后，在页面右上角等固定位置显示用户头像/昵称和下拉菜单。
    2. 下拉菜单中包含“个人中心”的入口链接。

#### 4.1.3 用户故事: 查看已购内容
+ **作为** 一名已登录用户
+ **我希望** 在个人中心能看到一个“我的购买”列表
+ **以便于** 快速找到并重新阅读我买过的所有文章和合集
+ **业务规则与逻辑**:
    1. 列表按购买时间倒序排列。
    2. 每项需展示：文章/合集标题、文章摘要、作者、购买时间。
    3. 对于通过购买合集解锁的文章，可有特殊标记，如“通过购买《XXX合集》获得”。
    4. 点击列表中的任何一项，跳转到该文章或合集的详情页。
+ **验收标准**:
    1. 成功支付的订单，其对应的文章/合集必须出现在此列表中。
    2. 列表中展示的信息与规则一致。
    3. 点击后能正确跳转。

#### 4.1.4 用户故事: 管理我的工具
+ **作为** 一名已登录用户
+ **我希望** 在个人中心能找到一个“我的工具箱”
+ **以便于** 查看和继续编辑我之前使用过的所有工具
+ **业务规则与 logique**:
    1. 列表展示所有用户填写并产生过数据的工具。
    2. 每项需展示：工具名称、来源文章标题（可点击跳转）、最后修改时间。
    3. 点击工具名称或该行条目，在新标签页打开工具页面，并加载用户上次保存的数据。
+ **验收标准**:
    1. 用户只要在工具页填写过数据，该工具就应出现在列表中。
    2. 列表展示信息与规则一致。
    3. 点击后能正确打开工具并恢复数据。

#### 4.1.5 用户故事: 管理我的笔记与划线
+ **作为** 一名已登录用户
+ **我希望** 在个人中心有一个“我的笔记”入口
+ **以便于** 集中回顾我在所有文章中记录的划线和想法，形成我自己的知识库。
+ **业务规则与逻辑**:
    1. 在个人中心导航中，新增“我的笔记”页面。
    2. 页面中以列表形式展示用户所有的划线和笔记，按文章进行分组，并按记录时间倒序排列。
    3. 每条记录需展示：
        * **划线内容原文**。
        * **我的笔记内容** (如果有的话)。
        * **来源文章标题** (可点击，直接跳转到原文中该划线所在的位置)。
+ **验收标准**:
    1. 个人中心有“我的笔记”入口。
    2. 用户在文章中做的每一条划线和笔记，都必须准确无误地同步到此页面。
    3. 点击来源文章标题，能实现页面内精准跳转。

#### 4.1.6 用户故事: 查看我的点赞
+ **作为** 一名已登录用户
+ **我希望** 在个人中心能看到一个“我的点赞”列表
+ **以便于** 快速回顾和找到我认可过的所有文章。
+ **业务规则与逻辑**:
    1. 在个人中心导航中，新增“我的点赞”页面。
    2. 列表形式展示用户所有点赞过的文章，按点赞时间倒序排列。
    3. 每项需展示：文章标题、作者、摘要。
    4. 点击任意一项，可跳转至该文章详情页。
+ **验收标准**:
    1. 个人中心有“我的点赞”入口。
    2. 用户点赞/取消点赞后，该列表实时同步更新。

#### 4.1.7 用户故事: 修改密码
+ **作为** 一名使用邮箱注册的用户
+ **我希望** 在个人中心的账户设置里可以修改我的登录密码
+ **以便于** 保障我的账户安全
+ **业务规则与逻辑**:
    1. 提供“旧密码”、“新密码”、“确认新密码”三个输入框。
    2. 后端需校验旧密码的正确性。
    3. 后端需校验两次输入的新密码是否一致。
+ **验收标准**:
    1. 旧密码错误时，应有明确提示。
    2. 新密码两次输入不一致时，应有明确提示。
    3. 成功修改后，应有成功提示，并要求用户使用新密码重新登录。

### 4.2 模块二：内容发现、阅读与互动
#### 4.2.1 用户故事: 全站内容搜索
+ **作为** 一名用户
+ **我希望** 通过输入关键词，快速找到包含该关键词的所有相关文章
+ **以便于** 解决我的特定问题或找到我感兴趣的主题。
+ **业务规则与逻辑**:
    1. **搜索入口**: 在网站的顶部导航栏，提供一个常驻的【搜索框】。
    2. **搜索范围**: 搜索逻辑应至少覆盖所有已发布文章的【标题】和【正文内容】。
    3. **触发搜索**: 用户在搜索框输入关键词后，可以按回车或点击搜索按钮触发搜索。
    4. **搜索结果页**: 跳转到一个独立的搜索结果页面，该页面以列表形式展示所有匹配的文章。
    5. **结果展示**: 搜索结果列表中的每篇文章，除了展示标题、摘要外，应高亮显示匹配到的【关键词】。
+ **验收标准**:
    1. 搜索框在全站各主要页面都可见且可用。
    2. 输入关键词后能正确返回包含该关键词的文章列表。
    3. 搜索结果页的样式与常规文章列表页保持一致。
    4. 关键词在搜索结果中必须有高亮显示。

#### 4.2.2 用户故事: 浏览文章列表页
+ **作为** 一名用户
+ **我希望** 看到一个信息丰富、分类清晰的文章列表
+ **以便于** 快速发现、筛选并决定是否要阅读或购买感兴趣的内容
+ **业务规则与逻辑**:
    1. **布局与排序**: 默认按“最新发布”时间倒序排列。提供“热门度”、“价格”等排序选项。
    2. **筛选功能**: 提供按“分类”、“难度”等维度的筛选器。
    3. **文章卡片元素**: 每篇文章以卡片形式展示，必须包含：特色标签（【免费阅读】、【高级内容】等）、文章标题与摘要、作者信息、元数据（点赞数）、价格信息、操作按钮（【立即阅读】或【立即购买】）。
    4. **加载方式**: 列表底部应有【加载更多】按钮，点击后异步加载下一页内容。
+ **验收标准**:
    1. 文章列表页的布局和卡片设计风格需与提供的UI参考图保持一致。
    2. 排序和筛选功能可正常工作。
    3. 不同类型的文章（免费/付费）在卡片上的操作按钮和展示逻辑必须明确区分。

#### 4.2.3 用户故事: 阅读文章详情
+ **作为** 一名读者
+ **我希望** 阅读界面简洁专业，排版优良，并能在长文章中快速导航
+ **以便于** 获得沉浸式的、高效的阅读体验。
+ **业务规则与逻辑**:
    1. **核心体验**: 采用“工作台式”布局，设计简洁、专业，注重排版和字体。
    2. **Markdown支持**: 完美渲染标准的Markdown语法。
    3. **响应式设计**: 界面布局能无缝适配PC、平板和手机屏幕尺寸。
    4. **文章内导航**: 对于长文章，在PC端提供常驻的“目录侧边栏”，在移动端提供可收起的目录，允许用户在章节间快速跳转。
+ **验收标准**:
    1. Markdown各种语法元素渲染正确、美观。
    2. 在不同尺寸设备上，阅读排版均无错乱。
    3. 目录导航功能可用，点击章节标题可平滑滚动至对应位置。

#### 4.2.4 用户故事: 在阅读时划线与记录想法
+ **作为** 一名读者
+ **我希望** 在阅读文章时可以方便地划出重点内容，并对划线部分添加我自己的笔记
+ **以便于** 加深理解、记录灵感，并将外部知识内化为自己的思考。
+ **业务规则与逻辑**:
    1. **触发划线**: 在文章详情页，用户用鼠标或手指长按选中文本后，旁边会自动弹出一个小工具条。
    2. **划线操作**: 工具条上包含【划线】按钮。点击后，选中的文本背景会高亮（如变为淡黄色），表示划线成功。再次点击已划线区域的文本，可取消划线。
    3. **添加笔记**: 工具条上还包含【写想法】按钮。点击后，会弹出一个小的文本输入框，用户可以输入自己的笔记和想法。保存后，该处划线应有特殊视觉标识（如虚线边框或小图标），提示此处有笔记。
    4. **查看笔记**: 鼠标悬停或点击该有特殊标识的划线区域，会以浮层或卡片形式展示用户之前记录的笔记内容。
    5. **数据持久化**: 所有的划线和笔记数据都必须与用户账号绑定，并实时保存在服务器，确保用户在不同设备登录都能看到。
+ **验收标准**:
    1. 能够流畅地选中文字并进行划线/取消划线操作。
    2. 能够为任意划线区域添加、查看和编辑笔记。
    3. 有笔记的划线区域与普通划线区域在视觉上有明显区分。
    4. 更换设备或浏览器后，用户的划线和笔记数据必须保持同步。
    5. 该功能需要用户登录后才能使用，未登录用户操作时应提示登录。

#### 4.2.5 用户故事: 点赞与分享文章
+ **作为** 一名读者
+ **我希望** 在文章页面底部能方便地进行点赞和社交分享
+ **以便于** 表达我对优质内容的认可，并将其推荐给我的朋友。
+ **业务规则与逻辑**:
    1. **点赞功能**:
        * 在文章详情页的固定位置（如文末或侧边栏），设置一个【点赞】按钮（可包含当前点赞总数）。
        * 用户点击后，按钮变为“已点赞”状态，点赞总数+1。再次点击可取消点赞。
        * 点赞操作需要用户登录后才能进行。未登录用户点击时，应提示登录。
        * 用户的点赞记录需与账号绑定，保存在服务器。
    2. **分享功能**:
        * 在点赞按钮旁，设置【分享】按钮。
        * 点击分享，弹出一个包含多个社交媒体图标（如微信、微博、链接复制）的工具栏。
        * 点击对应图标，即可调用相应平台的分享接口或将文章链接复制到剪贴板。
+ **验收标准**:
    1. 点赞按钮功能正常，可点赞/取消点赞，总数正确变化。
    2. 未登录用户点击点赞时，会触发登录提示。
    3. 分享功能可正常生成包含文章标题和链接的分享内容。

### 4.3 模块三：商业化与工具
#### 4.3.1 用户故事: 触发付费墙与支付
+ **作为** 一名免费用户
+ **我希望** 在阅读付费文章的免费部分后，能看到一个信息清晰的付费墙，并能顺畅地完成支付
+ **以便于** 我在充分了解价值后，快速决策并解锁全文。
+ **业务规则与逻辑**:
    1. **触发**: 当用户阅读付费文章并滚动到预设的免费内容末尾(`<!--more-->`标记处)时，自动触发并展示付费墙。
    2. **付费墙布局**: 采用“仪表盘”式布局，清晰呈现价值信息，包括：内容摘要、作者/品牌背书、沉没成本暗示（总字数、预计时长等）、醒目的“¥[价格] 阅读全文”按钮。
    3. **支付流程**: 点击付费按钮，以“弹窗 (Modal)”形式展示支付二维码，避免页面跳转。支持微信、支付宝扫码支付。
    4. **支付结果**: 系统轮询支付状态，成功后自动关闭弹窗，并无刷新解锁文章全文。
    5. **安全与防重**: 具备防重复支付机制。付费内容必须由服务器端在验证用户购买权限后才下发。
+ **验收标准**:
    1. 付费墙在指定位置准确触发。
    2. 支付流程顺畅，成功后内容无刷新解锁。
    3. 未付费用户通过任何前端技术手段均无法获取付费内容。

#### 4.3.2 用户故事: 浏览与购买内容合集
+ **作为** 一名用户
+ **我希望** 能在网站上看到这些打包好的内容合集，并能一键购买
+ **以便于** 体系化地学习某个主题，并享受可能的价格优惠。
+ **业务规则与逻辑**:
    1. **列表页展示**: 内容合集可以像单篇文章一样，出现在首页或文章列表页中，并带有明确的【合集】标签。
    2. **合集详情页**: 点击合集卡片，进入合集详情页。该页面需要清晰展示：合集的封面、标题、简介和总价、一个醒目的【购买合集】按钮、以及一个包含在合集内的**完整文章列表**。
    3. **购买流程**: 点击【购买合集】按钮后，触发的登录/支付流程与购买单篇文章完全一致。
    4. **购买结果**: 支付成功后，系统后台需要将该合集包含的**所有文章**的阅读权限授予该用户。
    5. **边界处理 (V1.6)**: 如果用户已购买合集中的某几篇文章，再次购买该合集时，价格不变，系统静默处理已拥有的权限。
+ **验收标准**:
    1. 用户能在前台清晰地识别和浏览内容合集。
    2. 合集详情页信息完整，包含文章列表。
    3. 用户可以成功购买合集，并在支付后获得合集内所有文章的永久阅读权限。

#### 4.3.3 用户故事: 使用轻量化模板工具
+ **作为** 一名读者
+ **我希望** 在文章的相关段落能直接打开实用的模板工具，并能保存我的成果
+ **以便于** 我能立刻将所学知识付诸实践。
+ **业务规则与逻辑**:
    1. **工具入口**: 在文章内容的相关段落附近，设置一个清晰的按钮或链接作为工具入口。
    2. **工具页面**: 点击入口后，在浏览器**新标签页**中打开工具页面，保证专注的操作空间。页面加载必须极快。
    3. **数据持久化**: 用户在工具页面输入的所有内容，系统应在用户停止输入一定时间后或输入框失去焦点时，**自动向服务器保存**。用户下次打开该工具时，加载已保存的数据。
    4. **导航连接**: 在工具页面始终保持一个清晰的“返回文章：<文章标题>”的导航链接，点击后关闭当前标签页，切换回文章页面。
    5. **成果导出**: 提供“导出”或“下载”功能，支持导出一张设计精良的图片(PNG/JPG)或PDF文档。
+ **验收标准**:
    1. 工具能从文章中正确打开，且加载迅速。
    2. 用户填写的数据能被自动、可靠地保存和恢复。
    3. 返回文章和导出成果功能均可用。

### 4.4 模块四：后台管理系统 (CMS)
#### 4.4.1 用户故事: 通过上传Markdown创建文章
+ **作为** 一名内容运营
+ **我希望** 通过直接上传一个写好的Markdown文件来开始文章发布流程
+ **以便于** 提高内容迁移和发布的效率。
+ **业务规则与逻辑**:
    1. **上传创建**: 支持上传`.md`文件，系统自动解析并填充至在线编辑器，并尝试自动提取标题。
    2. **编辑设置**: 运营人员在编辑器中进行微调、插入`<!--more-->`付费标记、设置价格、封面、关联工具/附件等。
    3. **预览**: 提供预览功能，可模拟PC和移动端的用户最终浏览效果。
    4. **发布**: 确认无误后，点击发布。
+ **验收标准**:
    1. `.md`文件内容能被正确解析并完整显示在编辑器中。
    2. 预览页面的样式与真实用户端页面高度一致，付费墙位置准确。
    3. 所有发布设置均能正确保存并生效。

#### 4.4.2 用户故事: 管理内容与附件
+ **作为** 一名内容运营
+ **我希望** 能在一个地方统一管理文章、合集和附件
+ **以便于** 维护平台的内容资产。
+ **业务规则与逻辑**:
    1. **文章管理**: 列表展示所有文章，包含点赞数等数据，支持按多种维度排序和搜索。
    2. **合集管理**: 支持创建、编辑（增删文章、修改价格等）、定价和管理内容合集。
    3. **附件管理**: 支持上传、预览、管理非文章主体的文件（PDF, Excel等），并能在文章编辑时进行关联。
+ **验收标准**: 后台各项管理功能操作流畅，数据准确。

#### 4.4.3 用户故事: 查看运营数据
+ **作为** 一名内容运营或管理员
+ **我希望** 能方便地查看订单和用户信息
+ **以便于** 了解平台运营状况和进行客户支持。
+ **业务规则与逻辑**:
    1. **订单管理**: 查看所有交易订单的列表，包含订单号、购买用户、购买内容、金额、支付状态、时间等信息。
    2. **用户管理**: 查看注册用户列表，可查看单个用户的购买历史。
+ **验收标准**: 订单和用户信息列表准确无误。

### 4.5 模块五：角色与权限
#### 4.5.1 用户故事: 内容运营无缝切换工作模式
+ **作为** 一名内容运营
+ **我希望** 在登录后，既能像普通用户一样浏览网站，又能看到一个清晰的管理后台入口
+ **以便于** 我随时切换到内容管理模式，并方便地预览我的工作成果。
+ **业务规则与逻辑**:
    1. 系统使用统一的登录入口。
    2. 用户登录后，后端返回的用户信息中需包含其角色标识。
    3. 若用户为`内容运营`或`系统管理员`，则在页面顶部的用户菜单额外显示一个【后台管理】的入口按钮。
    4. 所有后台页面和API接口，都必须在服务器端进行严格的角色权限校验。
+ **验收标准**:
    1. `普通用户`账号登录后，页面上不可见任何后台管理入口。
    2. `内容运营`账号登录后，必须在页头清晰地看到【后台管理】入口。
    3. 直接尝试通过URL访问后台管理页面时，若非对应角色，必须被拦截。

#### 4.5.2 用户故事: 管理员分配权限
+ **作为** 一名系统管理员
+ **我希望** 能在后台指定或撤销其他用户的“内容运营”权限
+ **以便于** 管理我的团队成员。
+ **业务规则与逻辑**:
    1. 系统的第一个`系统管理员`账号通过安全的后端方式（如数据库预置或部署脚本）创建，不允许前端注册。
    2. `系统管理员`登录后台后，在“用户管理”模块中，可以对任何一个已注册的`普通用户`进行角色提升或降级。
+ **验收标准**:
    1. 无法通过常规注册流程创建管理员账号。
    2. 管理员能在后台成功修改其他用户的角色。

## 5. 非功能性需求
+ **性能**: 核心页面（首页、文章页）LCP应在2.5秒内；工具页面加载应在2秒内。
+ **安全性**: 用户密码必须加盐哈希存储；防御常见的Web攻击（XSS, CSRF, SQL注入）；付费内容后端授权。
+ **易用性**: 核心流程无需引导即可顺暢完成；后台操作界面直观易懂。
+ **兼容性**:
    - **PC端**: 兼容Chrome, Firefox, Safari, Edge最新2个大版本。
    - **移动端**: 必须是响应式设计，在主流iOS和Android系统浏览器上提供良好的浏览和操作体验。

## 6. 数据指标
为衡量产品上线后的效果并指导后续迭代，我们需要关注并埋点以下核心数据指标：

### 6.1 核心业务指标
+ **用户注册数**: 新增注册用户总数，衡量用户获取能力。
+ **付费用户数 (Paying Users)**: 在特定时间段内至少完成一笔成功支付的用户总数。
+ **总收入 (GMV)**: 商品交易总额，衡量平台的商业价值。
+ **客单价 (Average Revenue Per User, ARPU)**: GMV / 付费用户数，衡量用户的平均付费水平。

### 6.2 用户活跃与粘性
+ **日/月活跃用户 (DAU/MAU)**: 每日/每月至少登录一次的独立用户数，衡量产品活跃度。
+ **用户留存率**: (次日/7日/30日) 新用户在注册后第N天再次登录的比例，衡量产品对用户的长期吸引力。
+ **笔记/划线使用率**: 使用过笔记或划线功能的用户数 / 活跃用户数，衡量深度学习功能的渗透率。

### 6.3 内容效果指标
+ **单篇文章/合集付费转化率**: 购买该内容的用户数 / 浏览该内容详情页的用户数。
+ **点赞数**: 每篇文章获得的点赞总数，作为内容质量的初步量化参考。
+ **分享数/率**: 每篇文章被分享的总次数或分享用户比例，衡量内容的传播潜力。
+ **完读率**: 阅读至文章末尾的用户数 / 开始阅读该文章的用户数，衡量内容的吸引力和质量。

